/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'java'
    id 'maven-publish'
    id 'eclipse'
    id 'com.palantir.git-version' version '0.12.2'
}

repositories {
    mavenLocal()
    maven {
        url = 'http://packages.confluent.io/maven/'
    }

    maven {
        url = 'https://oss.sonatype.org/content/groups/public/'
    }

    maven {
        url = 'http://repo.maven.apache.org/maven2'
    }
}

dependencies {
    compile 'io.debezium:debezium-core:0.9.5.Final'
    compile 'io.debezium:debezium-ddl-parser:0.9.5.Final'
    compile 'mysql:mysql-connector-java:8.0.13'
    compile 'com.github.yomo:maria-binlog-connector-java:0.0.1'
    testCompile 'mil.nga:wkb:1.0.2'
    testCompile group: 'io.debezium', name: 'debezium-core', version: '0.9.5.Final', classifier: 'tests'              
    testCompile group: 'io.debezium', name: 'debezium-embedded', version: '0.9.5.Final', classifier: 'tests'
    testCompile 'io.debezium:debezium-core:0.9.5.Final'
    testCompile 'io.debezium:debezium-embedded:0.9.5.Final'
    testCompile 'org.slf4j:slf4j-log4j12:1.7.25'
    testCompile 'junit:junit:4.12'
    testCompile 'org.testng:testng:6.9.5'
    testCompile 'org.mockito:mockito-core:2.28.2'
    testCompile 'org.easytesting:fest-assert:1.4'
    testCompile 'io.confluent:kafka-connect-avro-converter:5.1.2'
    compileOnly 'org.apache.kafka:connect-api:2.2.0'
    compileOnly 'org.slf4j:slf4j-api:1.7.25'
}

task sourcesJar(type: Jar) {
    classifier = 'sources'
    from(sourceSets.main.allJava)
}

task testsJar(type: Jar) {
    classifier = 'tests'
    from(sourceSets.test.output)
}

group = 'io.debezium'
version gitVersion()
description = 'Debezium Connector for Maria'
sourceCompatibility = '1.8'

configurations.all {
}

publishing {
    publications {
        maven(MavenPublication) {
            from(components.java)
            artifact(sourcesJar)
            artifact(testsJar)
        }
    }
}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

test {
    useTestNG()
}
